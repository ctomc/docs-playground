How the JBoss AS instance is built and configured for testsuite modules.
- Latest WildFly Documentation
=======================================================================================================

[[how-the-jboss-as-instance-is-built-and-configured-for-testsuite-modules.]]
How the JBoss AS instance is built and configured for testsuite modules.
------------------------------------------------------------------------

Refer to
https://docs.jboss.org/author/display/AS71/Shortened+Maven+Run+Overview[Shortened
Maven Run Overview] to see the mentioned build steps.

1)  AS instance is copied from `${jboss.dist`} to
`testsuite/target/jbossas`. +
        Defaults to AS which is built by the project (
`build/target/jboss-as-*`).

2)

*testsuite/pom.xml:*

from $\{jboss.home} to $\{basedir}/target/jbossas +
phase generate-test-resources: resource-plugin, goal copy-resources

*testsuite/integration/pom.xml:*

phase process-test-resources: antrun-plugin:

[source,brush:,xml;,gutter:,false;]
----
<ant antfile="$\{basedir}/src/test/scripts/basic-integration-build.xml">
    <target name="build-basic-integration"/>
    <target name="build-basic-integration-jts"/>
</ant>
----

Which invokes

[source,brush:,xml;,gutter:,false;]
----
<target name="build-basic-integration" description="Builds server configuration for basic-integration tests">
      <build-server-config name="jbossas"/>
----

Which invokes

[source,brush:,xml;,gutter:,false;]
----
<!-- Copy the base distribution. -->
<!-- We exclude modules and bundles as they are read-only and we locate the via sys props. -->
<copy todir="@{output.dir}/@{name}">
    <fileset dir="@{jboss.dist}">
        <exclude name="**/modules/**"/>
        <exclude name="**/bundles/**"/>
    </fileset>
</copy>

<!-- overwrite with configs from test-configs and apply property filtering -->
<copy todir="@{output.dir}/@{name}" overwrite="true" failonerror="false">
    <fileset dir="@{test.configs.dir}/@{name}"/>
    <filterset begintoken="${" endtoken="}">
        <filter token="node0" value="${node0}"/>
        <filter token="node1" value="${node1}"/>
        <filter token="udpGroup" value="${udpGroup}"/>
        <filter-elements/>
    </filterset>
</copy>
----

[[arquillian-config-file-location]]
Arquillian config file location
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

[source,brush:,bash;,gutter:,false;]
----
-Darquillian.xml=some-file-or-classpath-resource.xml
----
